<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HosteLink — Hostels</title>

  <!-- Bootstrap CSS + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Your base theme CSS -->
  <link rel="stylesheet" href="../../css/dashboard.css" />
  <link rel="stylesheet" href="../../css/offCanvas.css">

  <style>
    /* Internal additions focused on responsiveness and Bootstrap integration */

    /* Layout spacing */
    .dashboard {
      min-height: 100vh;
      display: flex;
      gap: 1rem;
      padding: 1rem;
    }

    /* Ensure desktop sidebar shows; hidden on mobile via your media query */
    .sidebar.d-lg-flex {
      display: flex !important;
    }

    /* Topbar: mobile only */
    .topbar {
      display: flex;
      align-items: center;
      gap: .75rem;
      padding: .75rem 1rem;
      width: 100%;
    }

    @media (min-width: 992px) {
      .topbar {
        display: none;
      }
    }

    /* hide on desktop */
    .menu-btn {
      background: transparent;
      border: 1px solid var(--glass-border);
      color: var(--text);
      padding: .45rem .6rem;
      border-radius: 8px;
    }

    .page-title {
      font-weight: 700;
      color: var(--text);
      font-size: 1.05rem;
    }

    /* Content shell + controls responsiveness */
    .content-shell {
      overflow: hidden;
    }

    .controls {
      display: flex;
      gap: .6rem;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-bottom: .9rem;
    }

    .controls-left {
      display: flex;
      gap: .6rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .controls-right {
      display: flex;
      gap: .6rem;
      align-items: center;
    }

    .controls-left .form-control {
      min-width: 220px;
      max-width: 360px;
    }

    .controls-left .form-select {
      min-width: 160px;
    }

    @media (max-width: 576px) {
      .content-shell {
        padding: .9rem;
      }

      .controls-left .form-control {
        min-width: 160px;
        max-width: 100%;
      }

      .controls-left .form-select {
        min-width: 140px;
      }
    }

    /* Responsive hostel grid */
    .hostel-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: .9rem;
    }

    @media (min-width: 576px) {
      .hostel-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 992px) {
      .hostel-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (min-width: 1400px) {
      .hostel-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    /* Card + carousel styling (aligned with your theme) */
    .hostel-card {
      border-radius: 8px;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.03);
      display: flex;
      flex-direction: column;
      height: 100%;
      transition: transform .12s ease, box-shadow .12s ease;
    }

    .hostel-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 14px 40px rgba(2, 6, 23, 0.45);
    }

    .img-wrap {
      width: 100%;
      aspect-ratio: 4 / 3;
      overflow: hidden;
      position: relative;
      background: linear-gradient(180deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.02));
    }

    .img-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    @media (max-width: 576px) {
      .img-wrap {
        aspect-ratio: 16 / 9;
      }
    }

    .carousel-control-prev,
    .carousel-control-next {
      width: 38px;
      height: 38px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.28);
      border: 1px solid rgba(255, 255, 255, 0.06);
      top: 50%;
      transform: translateY(-50%);
    }

    .carousel-control-prev-icon,
    .carousel-control-next-icon {
      filter: invert(1) brightness(2);
      background-size: 14px 14px;
    }

    .carousel-indicators {
      bottom: 8px;
    }

    .carousel-indicators [data-bs-target] {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background-color: rgba(255, 255, 255, 0.35);
      border: none;
      margin: 0 .18rem;
    }

    .carousel-indicators .active {
      background-color: var(--accent);
      transform: scale(1.05);
    }

    .card-body {
      padding: .8rem;
      display: flex;
      flex-direction: column;
      gap: .45rem;
      flex: 1 1 auto;
    }

    .hostel-title {
      font-weight: 700;
      color: var(--text);
      font-size: 1rem;
      margin-bottom: 0;
    }

    .hostel-meta {
      display: flex;
      gap: .5rem;
      align-items: center;
      justify-content: space-between;
      color: var(--muted);
      font-size: .9rem;
    }

    .hostel-price {
      font-weight: 800;
      color: var(--text);
      font-size: .95rem;
    }

    .hostel-footer {
      display: flex;
      gap: .5rem;
      align-items: center;
      justify-content: space-between;
      margin-top: auto;
    }

    .btn-view {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: #021025;
      border: none;
      padding: .45rem .6rem;
      border-radius: 8px;
      font-weight: 700;
      font-size: .8rem;
    }

    .btn-book {
      background: transparent;
      color: var(--text);
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: .4rem .55rem;
      border-radius: 8px;
      font-size: .8rem;
    }

    .badge-rooms {
      background: rgba(255, 255, 255, 0.04);
      color: var(--muted);
      padding: .2rem .55rem;
      border-radius: 999px;
      font-weight: 700;
      font-size: .72rem;
    }

    .load-more-wrap {
      display: flex;
      justify-content: center;
      margin-top: 1rem;
    }

    .btn-load-more {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: #021025;
      border: none;
      padding: .6rem 1rem;
      border-radius: 8px;
      font-weight: 700;
    }

    /* Modal theme */
    .modal-content {
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.579), rgba(26, 26, 26, 0.749));
      border: 1px solid var(--glass-border);
      color: var(--text);
    }

    .modal-header {
      background: #000000be;
    }

    .modal-body {
      padding: .9rem;
    }

    .facility-badge {
      background: rgba(255, 255, 255, 0.05);
      color: var(--muted);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 999px;
      padding: .2rem .6rem;
      font-size: .8rem;
    }
  </style>
</head>

<body>
  <div class="dashboard container-fluid">
    <div class="row g-3">
      <!-- Sidebar (desktop, col automatically sized via your CSS width) -->
      <div class="col-lg-auto d-none d-lg-block">
        <aside class="sidebar d-lg-flex" aria-label="Main navigation">
          <div>
            <div class="logo">
              <div class="mark">HL</div>
              <div>
                <div class="title">HosteLink</div>
                <div class="subtitle">Dashboard</div>
              </div>
            </div>
            <nav class="nav-list">
              <a class="nav-item" href="./profile.html"><i class="bi bi-person-fill"></i> Profile</a>
              <a class="nav-item active" data-target="hostels"><i class="bi bi-building"></i> Hostels</a>
              <a class="nav-item" href="./support.html"><i class="bi bi-chat-dots-fill"></i> Support</a>
              <a class="nav-item" href="./notifications.html"><i class="bi bi-bell-fill"></i> Notifications</a>
            </nav>
          </div>
          <div class="sidebar-footer">
            <button class="logout-btn"><i class="bi bi-box-arrow-right"></i> Log out</button>
          </div>
        </aside>
      </div>

      <!-- Mobile topbar (menu button hidden on desktop) -->
      <div class="col-12 d-lg-none">
        <div class="topbar">
          <button class="menu-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu"
            aria-controls="mobileMenu">
            <i class="bi bi-list"></i>
          </button>
          <div class="page-title">Hostels</div>
        </div>
      </div>

      <!-- Main content -->
      <div class="col-lg">
        <main class="main w-100">
          <div class="content-shell">
            <!-- Header -->
            <div class="d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2">
              <div>
                <h3 class="m-0">Hostels</h3>
                <div class="muted">Browse and manage your hostel listings</div>
              </div>
              <div class="muted">Showing <span id="visibleCount">0</span> of <span id="totalCount">0</span></div>
            </div>

            <!-- Controls -->
            <div class="controls">
              <div class="controls-left">
                <input id="searchInput" class="form-control" placeholder="Search by location (e.g., Buea)"
                  aria-label="Search by location" />
                <select id="sortSelect" class="form-select" aria-label="Sort by">
                  <option value="default">Sort by</option>
                  <option value="price_high">Price: High → Low</option>
                  <option value="price_low">Price: Low → High</option>
                </select>
              </div>
              <div class="controls-right">
                <button id="loadMoreTop" class="btn-load-more">Load more</button>
              </div>
            </div>

            <!-- Hostels grid -->
            <section id="hostelGrid" class="hostel-grid" aria-live="polite"></section>

            <!-- Load more bottom -->
            <div class="load-more-wrap">
              <button id="loadMoreBottom" class="btn-load-more">Load more</button>
            </div>
          </div>
        </main>
      </div>
    </div>
  </div>

  <!-- Offcanvas mobile menu (Bootstrap) -->
  <div class="offcanvas offcanvas-start offcanvas-hostel" tabindex="-1" id="mobileMenu"
    aria-labelledby="mobileMenuLabel">
    <div class="offcanvas-header">
      <div class="logo">
        <div class="mark">HL</div>
        <div>
          <div class="title">HosteLink</div>
          <div class="subtitle">Dashboard</div>
        </div>
      </div>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
      <nav class="nav-list">
        <a class="nav-item" href="./profile.html"><i class="bi bi-person-fill"></i> Profile</a>
        <a class="nav-item active" data-target="hostels"><i class="bi bi-building"></i> Hostels</a>
        <a class="nav-item" href="./support.html"><i class="bi bi-chat-dots-fill"></i> Support</a>
        <a class="nav-item" href="./notifications.html"><i class="bi bi-bell-fill"></i> Notifications</a>
      </nav>
      <div class="sidebar-footer mt-3">
        <button class="logout-btn w-100"><i class="bi bi-box-arrow-right"></i> Log out</button>
      </div>
    </div>
  </div>

  <!-- Modal for hostel details -->
  <div class="modal fade" id="hostelModal" tabindex="-1" aria-labelledby="hostelModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="hostelModalLabel">Hostel details</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-lg-6">
              <div id="modalCarouselContainer"></div>
            </div>
            <div class="col-lg-6">
              <h4 id="modalTitle" class="m-0">—</h4>
              <div class="muted" id="modalLocation">Location</div>

              <div class="mt-2">
                <div><strong>Price</strong>
                  <span id="modalPrice" class="muted ms-2"></span>
                </div>
                <div class="mt-2"><strong>Rooms left</strong>
                  <span id="modalRooms" class="muted ms-2"></span>
                </div>
              </div>

              <div class="mt-3">
                <strong>Facilities</strong>
                <div id="modalFacilities" class="d-flex flex-wrap gap-2 mt-2"></div>
              </div>

              <div class="d-flex gap-2 mt-3">
                <button id="modalBookBtn" class="btn btn-sm"
                  style="background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#021025; border:none;">Book
                  hostel</button>
                <button class="btn btn-sm btn-outline-light" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Data
    const hostelsData = [
      { id: 'h1', title: 'Sunrise Hostel', location: 'Buea', price: 5000, priceLabel: '₦ 5,000 / night', roomsLeft: 3, facilities: ['Wi‑Fi', 'Kitchen', 'Parking'], images: ['https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=1200&q=80&auto=format&fit=crop'] },
      { id: 'h2', title: 'Campus Lodge', location: 'Buea', price: 4200, priceLabel: '₦ 4,200 / night', roomsLeft: 5, facilities: ['Wi‑Fi', 'Security', 'Lounge'], images: ['https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop'] },
      { id: 'h3', title: 'Riverside Rooms', location: 'Limbe', price: 6500, priceLabel: '₦ 6,500 / night', roomsLeft: 2, facilities: ['Wi‑Fi', 'Sea View', 'AC'], images: ['https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=1200&q=80&auto=format&fit=crop'] },
      { id: 'h4', title: 'Green Garden', location: 'Buea', price: 3800, priceLabel: '₦ 3,800 / night', roomsLeft: 6, facilities: ['Wi‑Fi', 'Garden', 'Shared Kitchen'], images: ['https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=1200&q=80&auto=format&fit=crop'] },
      { id: 'h5', title: 'City Central', location: 'Douala', price: 7200, priceLabel: '₦ 7,200 / night', roomsLeft: 1, facilities: ['Wi‑Fi', 'Business Desk', 'AC'], images: ['https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop'] },
      { id: 'h6', title: 'Budget Inn', location: 'Buea', price: 3200, priceLabel: '₦ 3,200 / night', roomsLeft: 10, facilities: ['Wi‑Fi', 'Shared Lounge'], images: ['https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop'] },
      { id: 'h7', title: 'Hilltop Hostel', location: 'Buea', price: 4500, priceLabel: '₦ 4,500 / night', roomsLeft: 7, facilities: ['Wi‑Fi', 'View', 'Laundry'], images: ['https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=1200&q=80&auto=format&fit=crop'] },
      { id: 'h8', title: 'Seaside Stay', location: 'Limbe', price: 6100, priceLabel: '₦ 6,100 / night', roomsLeft: 4, facilities: ['Wi‑Fi', 'Beach', 'AC'], images: ['https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=1200&q=80&auto=format&fit=crop', 'https://images.unsplash.com/photo-1505691723518-36a0f1b6b1f6?w=1200&q=80&auto=format&fit=crop'] },
    ];

    // State
    const hostelGrid = document.getElementById('hostelGrid');
    const visibleCountEl = document.getElementById('visibleCount');
    const totalCountEl = document.getElementById('totalCount');
    const searchInput = document.getElementById('searchInput');
    const sortSelect = document.getElementById('sortSelect');
    const loadMoreTop = document.getElementById('loadMoreTop');
    const loadMoreBottom = document.getElementById('loadMoreBottom');

    let allHostels = hostelsData.slice();
    let filteredHostels = allHostels.slice();
    let perPage = 6;
    let currentCount = 0;

    totalCountEl.textContent = allHostels.length;

    // Render
    function renderHostels(reset = false) {
      if (reset) {
        hostelGrid.innerHTML = '';
        currentCount = 0;
      }
      const toShow = filteredHostels.slice(currentCount, currentCount + perPage);
      toShow.forEach(h => hostelGrid.appendChild(createCard(h)));
      currentCount += toShow.length;
      visibleCountEl.textContent = Math.min(currentCount, filteredHostels.length);
      totalCountEl.textContent = filteredHostels.length;

      const allShown = currentCount >= filteredHostels.length;
      loadMoreTop.style.display = allShown ? 'none' : '';
      loadMoreBottom.style.display = allShown ? 'none' : '';
    }

    function createCard(h) {
      const card = document.createElement('article');
      card.className = 'hostel-card';

      const carouselId = `carousel-${h.id}`;

      // Carousel
      const carousel = document.createElement('div');
      carousel.className = 'carousel slide';
      carousel.id = carouselId;
      carousel.setAttribute('data-bs-ride', 'carousel');

      // Dots
      const indicators = document.createElement('div');
      indicators.className = 'carousel-indicators';
      h.images.forEach((img, idx) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.setAttribute('data-bs-target', `#${carouselId}`);
        btn.setAttribute('data-bs-slide-to', String(idx));
        if (idx === 0) btn.className = 'active';
        btn.setAttribute('aria-label', `Slide ${idx + 1}`);
        indicators.appendChild(btn);
      });

      // Slides
      const inner = document.createElement('div');
      inner.className = 'carousel-inner';
      h.images.forEach((img, idx) => {
        const item = document.createElement('div');
        item.className = 'carousel-item' + (idx === 0 ? ' active' : '');
        const wrap = document.createElement('div');
        wrap.className = 'img-wrap';
        const image = document.createElement('img');
        image.src = img;
        image.alt = `${h.title} image ${idx + 1}`;
        wrap.appendChild(image);
        item.appendChild(wrap);
        inner.appendChild(item);
      });

      // Arrows
      const prev = document.createElement('button');
      prev.className = 'carousel-control-prev';
      prev.type = 'button';
      prev.setAttribute('data-bs-target', `#${carouselId}`);
      prev.setAttribute('data-bs-slide', 'prev');
      prev.innerHTML = `<span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span>`;

      const next = document.createElement('button');
      next.className = 'carousel-control-next';
      next.type = 'button';
      next.setAttribute('data-bs-target', `#${carouselId}`);
      next.setAttribute('data-bs-slide', 'next');
      next.innerHTML = `<span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span>`;

      carousel.append(indicators, inner, prev, next);

      // Body
      const body = document.createElement('div');
      body.className = 'card-body';

      const title = document.createElement('div');
      title.className = 'hostel-title';
      title.textContent = h.title;

      const meta = document.createElement('div');
      meta.className = 'hostel-meta';
      meta.innerHTML = `<div><i class="bi bi-geo-alt-fill"></i> <span class="ms-1">${h.location}</span></div>
                        <div class="hostel-price">${h.priceLabel}</div>`;

      const footer = document.createElement('div');
      footer.className = 'hostel-footer';

      const actions = document.createElement('div');
      actions.className = 'd-flex align-items-center gap-2';

      const bookBtn = document.createElement('button');
      bookBtn.className = 'btn-book';
      bookBtn.textContent = 'Book hostel';
      bookBtn.addEventListener('click', () => alert(`Booking flow for ${h.title} (${h.priceLabel})`));

      const detailsBtn = document.createElement('button');
      detailsBtn.className = 'btn-view';
      detailsBtn.textContent = 'View details';
      detailsBtn.addEventListener('click', () => openDetailsModal(h));

      const roomsBadge = document.createElement('span');
      roomsBadge.className = 'badge-rooms';
      roomsBadge.textContent = `${h.roomsLeft} rooms left`;

      actions.append(bookBtn, detailsBtn);
      footer.append(actions, roomsBadge);

      body.append(title, meta, footer);
      card.append(carousel, body);

      return card;
    }

    // Filters + sort
    function applyFiltersAndSort() {
      const q = searchInput.value.trim().toLowerCase();
      const sort = sortSelect.value;

      filteredHostels = allHostels.filter(h => !q || h.location.toLowerCase().includes(q));

      if (sort === 'price_high') filteredHostels.sort((a, b) => b.price - a.price);
      else if (sort === 'price_low') filteredHostels.sort((a, b) => a.price - b.price);

      renderHostels(true);
    }

    searchInput.addEventListener('input', applyFiltersAndSort);
    sortSelect.addEventListener('change', applyFiltersAndSort);

    // Load more
    loadMoreTop.addEventListener('click', () => renderHostels(false));
    loadMoreBottom.addEventListener('click', () => {
      renderHostels(false);
      setTimeout(() => {
        const lastCard = hostelGrid.lastElementChild;
        if (lastCard) lastCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }, 120);
    });

    // Modal
    function openDetailsModal(h) {
      document.getElementById('modalTitle').textContent = h.title;
      document.getElementById('modalLocation').textContent = h.location;
      document.getElementById('modalPrice').textContent = h.priceLabel;
      document.getElementById('modalRooms').textContent = `${h.roomsLeft}`;

      const facilitiesWrap = document.getElementById('modalFacilities');
      facilitiesWrap.innerHTML = '';
      h.facilities.forEach(f => {
        const tag = document.createElement('span');
        tag.className = 'facility-badge';
        tag.textContent = f;
        facilitiesWrap.appendChild(tag);
      });

      // Modal carousel
      const container = document.getElementById('modalCarouselContainer');
      container.innerHTML = '';
      const modalCarouselId = `modalCarousel-${h.id}`;
      const carousel = document.createElement('div');
      carousel.id = modalCarouselId;
      carousel.className = 'carousel slide';
      carousel.setAttribute('data-bs-ride', 'carousel');

      const indicators = document.createElement('div');
      indicators.className = 'carousel-indicators';
      h.images.forEach((img, idx) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.setAttribute('data-bs-target', `#${modalCarouselId}`);
        btn.setAttribute('data-bs-slide-to', String(idx));
        if (idx === 0) btn.className = 'active';
        indicators.appendChild(btn);
      });

      const inner = document.createElement('div');
      inner.className = 'carousel-inner';
      h.images.forEach((img, idx) => {
        const item = document.createElement('div');
        item.className = 'carousel-item' + (idx === 0 ? ' active' : '');
        const image = document.createElement('img');
        image.src = img;
        image.alt = `${h.title} image ${idx + 1}`;
        image.style.width = '100%';
        image.style.height = '360px';
        image.style.objectFit = 'cover';
        item.appendChild(image);
        inner.appendChild(item);
      });

      const prev = document.createElement('button');
      prev.className = 'carousel-control-prev';
      prev.type = 'button';
      prev.setAttribute('data-bs-target', `#${modalCarouselId}`);
      prev.setAttribute('data-bs-slide', 'prev');
      prev.innerHTML = `<span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span>`;

      const next = document.createElement('button');
      next.className = 'carousel-control-next';
      next.type = 'button';
      next.setAttribute('data-bs-target', `#${modalCarouselId}`);
      next.setAttribute('data-bs-slide', 'next');
      next.innerHTML = `<span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span>`;

      carousel.append(indicators, inner, prev, next);
      container.appendChild(carousel);

      const modal = new bootstrap.Modal(document.getElementById('hostelModal'));
      modal.show();
      setTimeout(() => {
        const bsCarousel = bootstrap.Carousel.getOrCreateInstance(document.getElementById(modalCarouselId));
        bsCarousel.to(0);
      }, 80);
    }

    // Initial render
    document.addEventListener('DOMContentLoaded', () => {
      allHostels = hostelsData.slice();
      filteredHostels = allHostels.slice();
      renderHostels(true);
    });
  </script>
</body>

</html>